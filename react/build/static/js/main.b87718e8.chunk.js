(this["webpackJsonpuser-login"]=this["webpackJsonpuser-login"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(25),r=n.n(s),o=n(67),l=(n(72),n(73),n(8)),i=n(112),j=n(111),d=n(106),u=n(1);var b=function(e){var t=e.location,n=e.NetlifyIdentity,c=e.openNetlifyModal;return Object(u.jsx)("div",{style:{paddingBottom:"6px"},children:Object(u.jsxs)(i.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(u.jsxs)(i.a.Brand,{href:"/",style:{color:"white"},children:["the",Object(u.jsx)("span",{style:{fontWeight:"800",color:"orange"},children:"MVP"}),"shop"]}),Object(u.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(i.a.Collapse,{id:"basic-navbar-nav",children:Object(u.jsxs)(j.a,{className:"mr-auto",activeKey:t.pathname,children:[Object(u.jsx)(j.a.Link,{href:"/projects",children:"Projects"}),Object(u.jsx)(j.a.Link,{href:"/milestones",children:"Milestones"}),Object(u.jsx)(j.a.Link,{href:"/devlog",children:"DevLog"})]})}),Object(u.jsx)(n,{}),Object(u.jsx)(d.a,{onClick:function(){c()},children:"Login"})]})})},h=n(16),p=n(7);var O=function(){return Object(u.jsx)("div",{children:"Home"})};var x=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(l.a)(s,2),o=r[0],i=r[1];return Object(u.jsxs)("div",{className:"login-wrapper",children:[Object(u.jsx)("h3",{children:"Please log in."}),Object(u.jsxs)("form",{className:"login-form",action:"/auth/login",method:"post",children:[Object(u.jsx)("label",{children:"Username"}),Object(u.jsx)("input",{onChange:function(e){return a(e.target.value)},placeholder:"Enter Username",name:"username",value:n,type:"text",required:!0}),Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{onChange:function(e){return i(e.target.value)},placeholder:"Enter Password",name:"password",value:o,type:"password",required:!0}),Object(u.jsx)("button",{type:"submit",className:"button login-button",value:"Login",disabled:null,children:"Log In"})]})]})};var m=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(l.a)(s,2),o=r[0],i=r[1];return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h3",{children:"Please create a username and password."}),Object(u.jsxs)("form",{className:"login-form",action:"/auth/signup",method:"post",children:[Object(u.jsx)("label",{children:"Create Username"}),Object(u.jsx)("input",{onChange:function(e){return a(e.target.value)},placeholder:"Enter Username",name:"username",value:n,type:"text",required:!0}),Object(u.jsx)("label",{children:"Create Password"}),Object(u.jsx)("input",{onChange:function(e){return i(e.target.value)},placeholder:"Enter Password",name:"password",value:o,type:"password",required:!0}),Object(u.jsx)("button",{type:"submit",className:"button login-button",value:"Login",disabled:null,children:"Sign Up"})]})]})},f=n(45),g=n(24),v=n(29),y=n.n(v),S=n(44),C=n(107),k=n(9),N=n.n(k),w=n(50);n(99);var _=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(1),r=Object(l.a)(s,2),o=r[0],i=r[1],j=Object(c.useState)({title:"",subtitle:"",description:"",due_date:"",ms_status:"TODO"}),b=Object(l.a)(j,2),p=b[0],O=b[1],x={},m=function(){var e=Object(S.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:4001/milestones/".concat(1));case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){m().then((function(){return console.log("todos:",n)}))}),[]);var v=function(e){O((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(g.a)({},e.target.name,e.target.value))}))};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(C.a,{className:"d-flex p-6 justify-content-center",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x={title:p.title,ms_status:"TODO",description:p.description,due_date:p.due_date,subtitle:p.subtitle,project_id:1},O({title:"",subtitle:"",description:"",due_date:""}),console.log("milestone",x),N.a.post("http://localhost:4001/milestones",x).then((function(e){console.log("post milestone response",e)})).then((function(){return m()})).catch((function(e){console.log("post milestone error",e)}))},children:[Object(u.jsx)("input",{type:"text",name:"title",style:{flex:"10",padding:"5px"},placeholder:"Title ...",value:p.title,onChange:v}),Object(u.jsx)("input",{type:"text",name:"subtitle",style:{flex:"10",padding:"5px"},placeholder:"Subtitle ...",value:p.subtitle,onChange:v}),Object(u.jsx)("input",{type:"text",name:"description",style:{flex:"10",padding:"5px"},placeholder:"Description ...",value:p.description,onChange:v}),Object(u.jsxs)("label",{for:"due_date",style:{backgroundColor:"darkorange",color:"black",flex:"2",padding:"5px",marginBottom:"5px"},children:["Due Date:"," "]}),Object(u.jsx)("input",{type:"date",name:"due_date",style:{flex:"10",padding:"5px"},placeholder:"Due date ...",value:p.due_date,onChange:v}),Object(u.jsx)(d.a,{type:"submit",value:"Submit",className:"btn",style:{flex:"1"},children:"Add"})]})}),Object(u.jsx)(C.a,{style:{backgroundColor:"lightslategray"},className:"p-12",children:Object(u.jsx)(w.VerticalTimeline,{children:n.map((function(e,t){return Object(u.jsxs)(w.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#20B2AA",color:"lightyellow"},contentArrowStyle:{borderRight:"7px solid white"},date:e.due_date,dateClassName:"timeline-date",iconStyle:{background:"".concat("COMPLETED"===e.ms_status?"mediumseagreen":"IN PROGRESS"===e.ms_status?"darkorange":"TODO"===e.ms_status?"firebrick":"gray"),color:"#eee"},children:[Object(u.jsx)("h3",{className:"vertical-timeline-element-title",children:e.title}),Object(u.jsx)("h4",{className:"vertical-timeline-element-subtitle",children:e.subtitle}),Object(u.jsx)("p",{children:e.description}),Object(u.jsx)(d.a,{variant:"COMPLETED"===e.ms_status?"success":"IN PROGRESS"===e.ms_status?"warning":"TODO"===e.ms_status?"danger":"primary",onClick:function(){return function(e){var t=e.id;"TODO"===e.ms_status?(e.ms_status="IN PROGRESS",N.a.put("http://localhost:4001/milestones/".concat(t),{ms_status:"IN PROGRESS"})):"IN PROGRESS"===e.ms_status?(e.ms_status="COMPLETED",N.a.put("http://localhost:4001/milestones/".concat(t),{ms_status:"COMPLETED"})):"COMPLETED"===e.ms_status&&(e.ms_status="TODO",N.a.put("http://localhost:4001/milestones/".concat(t),{ms_status:"TODO"})),a(Object(f.a)(n))}(e)},value:e.id,id:t,size:"sm",children:e.ms_status}),Object(u.jsx)(d.a,{variant:"danger",onClick:function(){return function(e){var t=n[e].id;console.log("delete milestone: ",t),N.a.delete("http://localhost:4001/milestones/".concat(t)),i(o-1)}(t)},size:"sm",className:"d-flex ml-auto",children:"Remove"})]})}))})})]})},E=n(108),D=n(109),P=n(110);var T=function(e){var t=e.projects,n=Object(c.useState)([]),a=Object(l.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)([]),i=Object(l.a)(o,2),j=i[0],b=i[1];return Object(c.useEffect)((function(){N.a.get("http://localhost:4001/users/").then((function(e){console.log(e.data),r(e.data)})),N.a.get("http://localhost:4001/permissions/").then((function(e){console.log(e.data),b(e.data)}))}),[]),Object(u.jsx)(C.a,{children:Object(u.jsxs)(E.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Username"}),Object(u.jsx)("th",{children:"Role"}),Object(u.jsx)("th",{children:"Permissions"})]})}),Object(u.jsx)("tbody",{children:s.map((function(e,n){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.username}),Object(u.jsx)("td",{children:Object(u.jsx)(d.a,{variant:e.isModerator?"success":"warning",onClick:function(){return t=e.isModerator,n=e.username,void N.a.post("http://localhost:4001/users/",{isModerator:!t,username:n}).then((function(){N.a.get("http://localhost:4001/users/").then((function(e){r(e.data)}))}));var t,n},children:e.isModerator?"Moderator":"Client"})}),Object(u.jsx)("td",{children:Object(u.jsx)(P.a,{children:["checkbox"].map((function(n){return Object(u.jsx)("div",{className:"mb-3",children:t.map((function(t,c){var a=j.find((function(n){return n.username===e.username&&n.project_id===t.id}));return Object(u.jsx)(P.a.Check,{inline:!0,label:t.title,type:n,id:"inline-".concat(n,"-1"),checked:a,onChange:function(n){return function(e,t,n,c){var a=c&&c.id;e.target.checked?N.a.post("http://localhost:4001/permissions/",{username:n,project_id:t}).then((function(){N.a.get("http://localhost:4001/permissions/").then((function(e){b(e.data)}))})):N.a.delete("http://localhost:4001/permissions/".concat(a)).then((function(){N.a.get("http://localhost:4001/permissions/").then((function(e){b(e.data)}))}))}(n,t.id,e.username,a)}})}))},"inline-".concat(n))}))})})]})}))})]})})};var L=function(e){var t=e.projects;function n(){var e=Object(c.useState)(!1),n=Object(l.a)(e,2),a=n[0],s=n[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"secondary",onClick:function(){return s(!0)},children:"Assign Roles/Projects"}),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(D.a,{show:a,onHide:function(){return s(!1)},children:[Object(u.jsx)(D.a.Header,{closeButton:!0,children:Object(u.jsx)(D.a.Title,{children:"Developer Log"})}),Object(u.jsx)(D.a.Body,{style:{backgroundColor:"#adb5bd"},children:Object(u.jsx)(C.a,{className:"d-flex p-6 justify-content-center",children:Object(u.jsx)(T,{projects:t})})})]})})]})}return Object(u.jsx)("div",{children:Object(u.jsx)(n,{})})};var M=function(e){e.currentUser;var t=e.localStorageCurrentUser,n=Object(c.useState)([]),s=Object(l.a)(n,2),r=s[0],o=s[1],i=Object(c.useState)([]),j=Object(l.a)(i,2),b=j[0],p=j[1],O=Object(c.useState)(1),x=Object(l.a)(O,2),m=x[0],v=x[1],y=Object(c.useState)({id:m,title:"",description:""}),S=Object(l.a)(y,2),k=S[0],w=S[1],_=Object(c.useState)(!1),D=Object(l.a)(_,2),P=D[0],T=D[1];a.a.useEffect((function(){t&&N.a.get("http://localhost:4001/users").then((function(e){T(0!==e.data.find((function(e){return e.username===t})).isModerator),console.log("isMod",P)})),N.a.get("http://localhost:4001/permissions").then((function(e){p(e.data)})),N.a.get("http://localhost:4001/projects/").then((function(e){o(e.data)}))}),[]);var M=function(e){w((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(g.a)({},e.target.name,e.target.value))}))};return Object(u.jsxs)(u.Fragment,{children:[P&&Object(u.jsx)(C.a,{className:"d-flex p-6 justify-content-center",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={id:m,title:k.title,description:k.description};o([].concat(Object(f.a)(r),[t])),v(m+1),w({title:"",description:""}),N.a.post("http://localhost:4001/projects",t).then((function(e){console.log("post project response",e)})).catch((function(e){console.log("post project error",e)}))},children:[Object(u.jsx)("input",{type:"text",name:"title",style:{flex:"10",padding:"5px"},placeholder:"Title ...",value:k.title,onChange:M}),Object(u.jsx)("input",{type:"text",name:"description",style:{flex:"10",padding:"5px"},placeholder:"Description ...",value:k.description,onChange:M}),Object(u.jsx)(d.a,{type:"submit",value:"Submit",className:"btn",style:{flex:"1"},children:"Add Project"}),Object(u.jsx)(C.a,{className:"d-flex p-6 justify-content-center",children:P&&Object(u.jsx)(L,{projects:r})})]})}),Object(u.jsx)(C.a,{children:Object(u.jsxs)(E.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"ID#"}),Object(u.jsx)("th",{children:"Project Title"}),Object(u.jsx)("th",{children:"Project Description"})]})}),Object(u.jsx)("tbody",{children:b.map((function(e,n){return r.filter((function(n){return n.id===e.project_id&&e.username===t})).map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.id}),Object(u.jsx)("td",{children:e.title}),Object(u.jsx)("td",{children:e.description})]})}))}))})]})})]})},I=n(64),U=n(113),R=n(114);var A=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(1),r=Object(l.a)(s,2),o=r[0],i=r[1],j=Object(c.useState)({title:"",subtitle:"",post:"",date:""}),b=Object(l.a)(j,2),p=b[0],O=b[1],x={},m=function(){var e=Object(S.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:4001/devlog/".concat(1));case 3:t=e.sent,a(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){m().then((function(){return console.log("logs:",n)}))}),[]);var f=function(e){O((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(g.a)({},e.target.name,e.target.value))}))},v=function(e){e.preventDefault(),x={title:p.title,post:p.post,date:p.date,subtitle:p.subtitle},i(o+1),O({title:"",subtitle:"",post:"",date:""}),console.log("log",x),N.a.post("http://localhost:4001/devlog",x).then((function(e){console.log("post devlog response",e)})).then((function(){return m()})).catch((function(e){console.log("post devlog error",e)}))};function k(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(d.a,{variant:"primary",onClick:function(){return a(!0)},children:"Add Log Entry"}),Object(u.jsxs)(D.a,{show:n,onHide:function(){return a(!1)},children:[Object(u.jsx)(D.a.Header,{closeButton:!0,children:Object(u.jsx)(D.a.Title,{children:"Developer Log"})}),Object(u.jsx)(D.a.Body,{style:{backgroundColor:"#adb5bd"},children:Object(u.jsx)(C.a,{className:"d-flex p-6 justify-content-center",children:Object(u.jsxs)(P.a,{className:"m-4",onSubmit:v,children:[Object(u.jsxs)(P.a.Row,{children:[Object(u.jsxs)(P.a.Group,{controlId:"title",children:[Object(u.jsx)(P.a.Label,{children:"Title"}),Object(u.jsx)(P.a.Control,{placeholder:"Post Title...",value:p.title,onChange:f,name:"title"})]}),Object(u.jsx)(I.a,{xs:"auto",children:Object(u.jsxs)(P.a.Group,{controlId:"subtitle",children:[Object(u.jsx)(P.a.Label,{children:"Subtitle"}),Object(u.jsx)(P.a.Control,{placeholder:"Subtitle...",value:p.subtitle,onChange:f,name:"subtitle"})]})}),Object(u.jsxs)(P.a.Group,{controlId:"date",children:[Object(u.jsx)(P.a.Label,{children:"Log Date"}),Object(u.jsx)(P.a.Control,{type:"date",value:p.date,onChange:f,name:"date"})]})]}),Object(u.jsxs)(P.a.Group,{controlId:"post",children:[Object(u.jsx)(P.a.Label,{children:"Log Post"}),Object(u.jsx)(P.a.Control,{as:"textarea",rows:3,value:p.post,onChange:f,name:"post",placeholder:"Post..."})]}),Object(u.jsx)(d.a,{variant:"primary",type:"submit",className:"float-right",children:"Add Entry"})]})})})]})]})}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(k,{}),Object(u.jsx)(C.a,{className:"p-12",children:Object(u.jsx)(U.a,{style:{color:"white"},defaultActiveKey:"0",className:"p-12",children:n.map((function(e,t){return Object(u.jsxs)(R.a,{style:{backgroundColor:"#708090"},children:[Object(u.jsx)(R.a.Header,{style:{backgroundColor:"lemonchiffon"},children:Object(u.jsx)(U.a.Toggle,{as:d.a,variant:"info",eventKey:"0",children:e.title})}),Object(u.jsx)(U.a.Collapse,{eventKey:"0",children:Object(u.jsx)(R.a.Body,{children:e.post})})]})}))})})]})},B=function(e){var t=e.currentUser,n=e.localStorageCurrentUser;return Object(u.jsxs)(p.c,{children:[Object(u.jsx)(p.a,{exact:!0,path:"/",component:O}),Object(u.jsx)(p.a,{path:"/login",component:x}),Object(u.jsx)(p.a,{path:"/signup",component:m}),Object(u.jsx)(p.a,{path:"/milestones",component:_}),Object(u.jsx)(p.a,{path:"/devlog",component:A}),Object(u.jsx)(p.a,{path:"/projects",render:function(e){return Object(u.jsx)(M,Object(h.a)(Object(h.a)({},e),{},{currentUser:t,localStorageCurrentUser:n}))}})]})};var G=function(){var e=n(103),t=a.a.useState(null),c=Object(l.a)(t,2),s=c[0],r=c[1];e.init();var o=e.currentUser();console.log(o);var i=Object(p.f)(b),j=s&&JSON.parse(localStorage.getItem("gotrue.user")).email;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(i,{NetlifyIdentity:function(){return a.a.useEffect((function(){!function(){var e=document.createElement("script");e.src="https://identity.netlify.com/v1/netlify-identity-widget.js",e.async=!0,document.body.appendChild(e)}()}),[]),Object(u.jsx)(u.Fragment,{})},openNetlifyModal:function(){var e=window.netlifyIdentity;e?(e.open(),e.on("login",(function(e){console.log("login",e),N.a.get("http://localhost:4001/users").then((function(t){!t.data.find((function(t){return t.username===e.email}))&&N.a.post("http://localhost:4001/users/",{username:e.email,isModerator:0}),r(e.email)}))}))):console.log("netlifyIdentity not defined")}}),Object(u.jsx)(B,{currentUser:s,localStorageCurrentUser:j}),Object(u.jsxs)("p",{children:["currentUser: ",s&&"welcome ".concat(s)]}),Object(u.jsxs)("p",{children:["localStorage currentUser: ","welcome ".concat(j)]})]})};r.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(G,{})})}),document.getElementById("root"))},72:function(e,t,n){},73:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.b87718e8.chunk.js.map