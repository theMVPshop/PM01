{"ast":null,"code":"var _jsxFileName = \"/Users/acaclasswork/Documents/PM01/react/src/App.js\",\n    _s2 = $RefreshSig$();\n\nimport React from \"react\";\nimport Navigation from \"./components/Navigation\";\nimport ReactRouter from \"./ReactRouter\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const netlifyIdentity = require(\"netlify-identity-widget\");\n\n  const [currentUser, setCurrentUser] = React.useState(null);\n  netlifyIdentity.init();\n  const user = netlifyIdentity.currentUser();\n  console.log(user);\n\n  function initNetlifyIdentity() {\n    const script = document.createElement(\"script\");\n    script.src = \"https://identity.netlify.com/v1/netlify-identity-widget.js\";\n    script.async = true;\n    document.body.appendChild(script);\n  }\n\n  function openNetlifyModal() {\n    const netlifyIdentity = window.netlifyIdentity;\n\n    if (netlifyIdentity) {\n      netlifyIdentity.open();\n      netlifyIdentity.on(\"login\", user => {\n        console.log(\"login\", user);\n        axios.get(\"http://localhost:4001/users\").then(response => {\n          let existingUser = response.data.find(x => x.username === user.email);\n          !existingUser && axios.post(\"http://localhost:4001/users/\", {\n            username: user.email,\n            isModerator: 0\n          });\n          setCurrentUser(user.email);\n        });\n      });\n    } else {\n      console.log(\"netlifyIdentity not defined\");\n    }\n  }\n\n  function NetlifyIdentity() {\n    _s();\n\n    React.useEffect(() => {\n      initNetlifyIdentity();\n    }, []);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  }\n\n  _s(NetlifyIdentity, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  const NavWithRouter = withRouter(Navigation);\n  let localStorageCurrentUser = currentUser && JSON.parse(localStorage.getItem(\"gotrue.user\")).email;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavWithRouter, {\n      NetlifyIdentity: NetlifyIdentity,\n      openNetlifyModal: openNetlifyModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReactRouter, {\n      currentUser: currentUser,\n      localStorageCurrentUser: localStorageCurrentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"currentUser: \", currentUser && `welcome ${currentUser}`]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"localStorage currentUser: \", `welcome ${localStorageCurrentUser}`]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(App, \"D3+eUn/eYbOcEwoCOjOk5Grmif4=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/acaclasswork/Documents/PM01/react/src/App.js"],"names":["React","Navigation","ReactRouter","axios","withRouter","App","netlifyIdentity","require","currentUser","setCurrentUser","useState","init","user","console","log","initNetlifyIdentity","script","document","createElement","src","async","body","appendChild","openNetlifyModal","window","open","on","get","then","response","existingUser","data","find","x","username","email","post","isModerator","NetlifyIdentity","useEffect","NavWithRouter","localStorageCurrentUser","JSON","parse","localStorage","getItem"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Navigation from \"./components/Navigation\";\nimport ReactRouter from \"./ReactRouter\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router\";\n\nfunction App() {\n  const netlifyIdentity = require(\"netlify-identity-widget\");\n  const [currentUser, setCurrentUser] = React.useState(null);\n\n  netlifyIdentity.init();\n\n  const user = netlifyIdentity.currentUser();\n\n  console.log(user);\n\n  function initNetlifyIdentity() {\n    const script = document.createElement(\"script\");\n\n    script.src = \"https://identity.netlify.com/v1/netlify-identity-widget.js\";\n    script.async = true;\n\n    document.body.appendChild(script);\n  }\n\n  function openNetlifyModal() {\n    const netlifyIdentity = window.netlifyIdentity;\n\n    if (netlifyIdentity) {\n      netlifyIdentity.open();\n      netlifyIdentity.on(\"login\", (user) => {\n        console.log(\"login\", user);\n        axios.get(\"http://localhost:4001/users\").then((response) => {\n          let existingUser = response.data.find(\n            (x) => x.username === user.email\n          );\n          !existingUser &&\n            axios.post(\"http://localhost:4001/users/\", {\n              username: user.email,\n              isModerator: 0,\n            });\n          setCurrentUser(user.email);\n        });\n      });\n    } else {\n      console.log(\"netlifyIdentity not defined\");\n    }\n  }\n\n  function NetlifyIdentity() {\n    React.useEffect(() => {\n      initNetlifyIdentity();\n    }, []);\n\n    return <></>;\n  }\n\n  const NavWithRouter = withRouter(Navigation);\n  let localStorageCurrentUser =\n    currentUser && JSON.parse(localStorage.getItem(\"gotrue.user\")).email;\n\n  return (\n    <>\n      <NavWithRouter\n        NetlifyIdentity={NetlifyIdentity}\n        openNetlifyModal={openNetlifyModal}\n      />\n      <ReactRouter\n        currentUser={currentUser}\n        localStorageCurrentUser={localStorageCurrentUser}\n      />\n      <p>currentUser: {currentUser && `welcome ${currentUser}`}</p>\n      <p>localStorage currentUser: {`welcome ${localStorageCurrentUser}`}</p>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}